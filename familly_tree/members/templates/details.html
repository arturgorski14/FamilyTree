{% extends "master.html" %}

{% block content %}
<div class="content-container">
    <div class="member-details">
        <h1>{{ member.firstname }} {{ member.lastname }}</h1>
        {% if member.family_name != member.lastname %}
            <p>Family name: {{ member.family_name }}</p>
        {% endif %}
        <p>Sex: {{ member.sex }}</p>
        <p>Age: {{ member.age }}</p>
        <p>Birth date: {{ member.birth_date }}</p>
        <p>Alive: {{ member.alive }}</p>
        {% if member.alive == "No" %}
            <p>Death date: {{ member.death_date }}</p>
        {% endif %}

        <p>Children:</p>
        <ul>
            {% if member.children %}
                {% for child in member.children %}
                    <li><a href="{% url 'members:details' child.id %}">{{ child }}</a></li>
                {% endfor %}
            {% else %}
                <li>Doesn't have any.</li>
            {% endif %}
        </ul>
        <a href="{% url 'members:choose_child' member.id %}">Add an existing child</a>

        {% if member.father_id %}
            <p>Father: <a href="{% url 'members:details' member.father_id %}">{{ member.father }}</a></p>
        {% else %}
            <p>Father: Nobody remembers the father</p>
        {% endif %}

        {% if member.mother_id %}
            <p>Mother: <a href="{% url 'members:details' member.mother_id %}">{{ member.mother }}</a></p>
        {% else %}
            <p>Mother: Nobody remembers the mother</p>
        {% endif %}

        {% if member.description %}
            <h4>Additional Information:</h4>
            <p>{{ member.description }}</p>
        {% endif %}

        {% include "edit_button.html" %}
        <p>Back to <a href="/members">Members</a></p>
    </div>

<div class="family-tree">
    <div class="generation grandparents">
        {% if member.father.father %}
        <div class="grand-ancestor">
            Grandfather (Father’s Side):<br>
            <a href="{% url 'members:details' member.father.father.id %}">{{ member.father.father }}</a>
        </div>
        {% else %}
        <div class="grand-ancestor">
            Grandfather (Father’s Side):<br>Unknown
        </div>
        {% endif %}

        {% if member.father.mother %}
        <div class="grand-ancestor">
            Grandmother (Father’s Side):<br>
            <a href="{% url 'members:details' member.father.mother.id %}">{{ member.father.mother }}</a>
        </div>
        {% else %}
        <div class="grand-ancestor">
            Grandmother (Father’s Side):<br>Unknown
        </div>
        {% endif %}

        {% if member.mother.father %}
        <div class="grand-ancestor">
            Grandfather (Mother’s Side):<br>
            <a href="{% url 'members:details' member.mother.father.id %}">{{ member.mother.father }}</a>
        </div>
        {% else %}
        <div class="grand-ancestor">
            Grandfather (Mother’s Side):<br>Unknown
        </div>
        {% endif %}

        {% if member.mother.mother %}
        <div class="grand-ancestor">
            Grandmother (Mother’s Side):<br>
            <a href="{% url 'members:details' member.mother.mother.id %}">{{ member.mother.mother }}</a>
        </div>
        {% else %}
        <div class="grand-ancestor">
            Grandmother (Mother’s Side):<br>Unknown
        </div>
        {% endif %}
    </div>

    <div class="generation parents">
        <div class="member-parent">
            Father:<br>
            {% if member.father %}
                <a href="{% url 'members:details' member.father.id %}">{{ member.father }}</a>
            {% else %}
                Unknown
            {% endif %}
        </div>
        <div class="member-parent">
            Mother:<br>
            {% if member.mother %}
                <a href="{% url 'members:details' member.mother.id %}">{{ member.mother }}</a>
            {% else %}
                Unknown
            {% endif %}
        </div>
    </div>

    <div class="generation siblings">
        {% if member.siblings %}
            {% for sibling in member.siblings %}
            <div class="member-sibling">
                Sibling:<br>
                <a href="{% url 'members:details' sibling.id %}">{{ sibling }}</a>
            </div>
            {% endfor %}
        {% else %}
            <div class="member-sibling">
                No siblings listed.
            </div>
        {% endif %}
    </div>

    <div class="generation children">
        {% if member.children %}
            {% for child in member.children %}
            <div class="member-child">
                Child:<br>
                <a href="{% url 'members:details' child.id %}">{{ child }}</a>
            </div>
            {% endfor %}
        {% else %}
            <div class="member-child">
                No children listed.
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
